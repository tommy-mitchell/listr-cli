# Snapshot report for `test/cli.ts`

The actual snapshot is saved in `cli.ts.snap`.

Generated by [AVA](https://avajs.dev).

## main

> CLI output

    [
      '[STARTED] node',
      '[TITLE] node: running "node -e \'process.exit(0)\'"...',
      '[TITLE] node',
      '',
      '[COMPLETED] node',
    ]

## fails

> CLI output

    [
      '[STARTED] node',
      '[TITLE] node: running "node -e \'process.exit(1)\'"...',
      '[TITLE] node',
    ]

## task reports command output

> CLI output

    [
      '[STARTED] echo',
      '[TITLE] echo: running "echo hello"...',
      '[TITLE] echo',
      '[OUTPUT] hello',
      '[COMPLETED] echo',
    ]

## task title changes when running: one-word

> CLI output

    [
      '[STARTED] node',
      '[TITLE] node: running "node -e \'process.exit(1)\'"...',
      '[TITLE] node',
    ]

## task title changes when running: multi-word

> CLI output

    [
      '[STARTED] sleep',
      '[TITLE] sleep: running "sleep 1"...',
      '[TITLE] sleep',
      '',
      '[COMPLETED] sleep',
    ]

## reports when command not found

> CLI output

    [
      '[STARTED] tsd',
      '[TITLE] tsd: running "tsd"...',
      '[TITLE] tsd: command not found.',
    ]

## reports when multi-word command not found

> CLI output

    [
      '[STARTED] foobar',
      '[TITLE] foobar: running "foobar hello"...',
      '[TITLE] foobar: command "foobar hello" not found.',
    ]

## successfully runs multiple commands

> CLI output

    [
      '[STARTED] sleep',
      '[TITLE] sleep: running "sleep 1"...',
      '[TITLE] sleep',
      '',
      '[COMPLETED] sleep',
      '[STARTED] echo',
      '[TITLE] echo: running "echo 2"...',
      '[TITLE] echo',
      '[OUTPUT] 2',
      '[COMPLETED] echo',
    ]

## fails early if a command fails

> CLI output

    [
      '[STARTED] node',
      '[TITLE] node: running "node -e \'process.exit(0)\'"...',
      '[TITLE] node',
      '',
      '[COMPLETED] node',
      '[STARTED] node',
      '[TITLE] node: running "node -e \'process.exit(1)\'"...',
      '[TITLE] node',
    ]

## flags: --all-optional

> CLI output

    [
      '[STARTED] node',
      '[TITLE] node: running "node -e \'process.exit(1)\'"...',
      '[TITLE] node',
      '[STARTED] node',
      '[TITLE] node: running "node -e \'process.exit(0)\'"...',
      '[TITLE] node',
      '',
      '[COMPLETED] node',
      '[STARTED] node',
      '[TITLE] node: running "node -e \'process.exit(1)\'"...',
      '[TITLE] node',
    ]

## commands can have shell symbols in them

> CLI output

    [
      '[STARTED] node',
      '[TITLE] node: running "node -e \'process.exit(0)\' && echo 2"...',
      '[TITLE] node',
      '[OUTPUT] 2',
      '[COMPLETED] node',
    ]

## commands with only one non-empty line output are trimmed

> CLI output

    [
      '[STARTED] echo',
      '[TITLE] echo: running "echo \'\' && echo hello"...',
      '[TITLE] echo',
      '[OUTPUT] hello',
      '[COMPLETED] echo',
    ]

## commands with multiline outputs aren't trimmed

> CLI output

    [
      '[STARTED] node',
      '[TITLE] node: running "node -e \'[...Array(5).keys()].forEach(i => console.log(i))\'"...',
      '[TITLE] node',
      '[OUTPUT] 0',
      '[OUTPUT] 1',
      '[OUTPUT] 2',
      '[OUTPUT] 3',
      '[OUTPUT] 4',
      '',
      '[COMPLETED] node',
    ]

## outputs stdout

> CLI output

    [
      '[STARTED] node',
      '[TITLE] node: running "node -e \'console.log(true)\'"...',
      '[TITLE] node',
      '[OUTPUT] true',
      '[COMPLETED] node',
    ]

## outputs stderr

> CLI output

    [
      '[STARTED] node',
      '[TITLE] node: running "node -e \'console.error(false)\'"...',
      '[TITLE] node',
      '[OUTPUT] false',
      '[COMPLETED] node',
    ]

## outputs stdout and stderr

> CLI output

    [
      '[STARTED] node',
      '[TITLE] node: running "node -e \'console.log(true); console.error(false)\'"...',
      '[TITLE] node',
      '[OUTPUT] true',
      '[OUTPUT] false',
      '',
      '[COMPLETED] node',
    ]

## uses silent renderer in CI

> CLI output

    [
      'true',
    ]

## running without arguments displays help text

> CLI output

    [
      'Usage',
      '$ listr [title:]<command> […]',
      '',
      'Commands should be space-separated. Commands with spaces in them must be surrounded by quotes.',
      '',
      'Equivalent to \'command1 && command2 && …\'.',
      '',
      'Options',
      '--all-optional            Continue executing tasks if one fails.      [default: exit]',
      '--hide-timer              Disable showing successful task durations.  [default: show]',
      '--environment, --env, -e  Set environment variables via process.env.',
      '',
      'Examples',
      'Run named test commands in order',
      '$ listr lint:xo \'tests and coverage\':\'c8 ava\'',
      '',
      'Run commands that can fail',
      '$ listr xo ava tsd --all-optional',
      '',
      'Set environment variables',
      '$ listr ava --env CI,NODE_OPTIONS:\'--loader=tsx\'',
      '#=> process.env.CI = "true"',
      '#=> process.env.NODE_OPTIONS = "--loader=tsx"',
    ]

## flags: -h

> CLI output

    [
      'Usage',
      '$ listr [title:]<command> […]',
      '',
      'Commands should be space-separated. Commands with spaces in them must be surrounded by quotes.',
      '',
      'Equivalent to \'command1 && command2 && …\'.',
      '',
      'Options',
      '--all-optional            Continue executing tasks if one fails.      [default: exit]',
      '--hide-timer              Disable showing successful task durations.  [default: show]',
      '--environment, --env, -e  Set environment variables via process.env.',
      '',
      'Examples',
      'Run named test commands in order',
      '$ listr lint:xo \'tests and coverage\':\'c8 ava\'',
      '',
      'Run commands that can fail',
      '$ listr xo ava tsd --all-optional',
      '',
      'Set environment variables',
      '$ listr ava --env CI,NODE_OPTIONS:\'--loader=tsx\'',
      '#=> process.env.CI = "true"',
      '#=> process.env.NODE_OPTIONS = "--loader=tsx"',
    ]

## processes environment variables

> CLI output

    [
      '[STARTED] echo',
      '[TITLE] echo: running "echo $FOO"...',
      '[TITLE] echo',
      '[OUTPUT] true',
      '[COMPLETED] echo',
      '[STARTED] echo',
      '[TITLE] echo: running "echo $BAR"...',
      '[TITLE] echo',
      '[OUTPUT] baz',
      '[COMPLETED] echo',
    ]

## processes environment variables: --env alias

> CLI output

    [
      '[STARTED] echo',
      '[TITLE] echo: running "echo $FOO"...',
      '[TITLE] echo',
      '[OUTPUT] true',
      '[COMPLETED] echo',
      '[STARTED] echo',
      '[TITLE] echo: running "echo $BAR"...',
      '[TITLE] echo',
      '[OUTPUT] baz',
      '[COMPLETED] echo',
    ]

## processes environment variables: -e short flag

> CLI output

    [
      '[STARTED] echo',
      '[TITLE] echo: running "echo $FOO"...',
      '[TITLE] echo',
      '[OUTPUT] true',
      '[COMPLETED] echo',
      '[STARTED] echo',
      '[TITLE] echo: running "echo $BAR"...',
      '[TITLE] echo',
      '[OUTPUT] baz',
      '[COMPLETED] echo',
    ]

## processes environment variables: multiple

> CLI output

    [
      '[STARTED] echo',
      '[TITLE] echo: running "echo $FOO"...',
      '[TITLE] echo',
      '[OUTPUT] true',
      '[COMPLETED] echo',
      '[STARTED] echo',
      '[TITLE] echo: running "echo $BAR"...',
      '[TITLE] echo',
      '[OUTPUT] baz',
      '[COMPLETED] echo',
      '[STARTED] echo',
      '[TITLE] echo: running "echo $FIZZ"...',
      '[TITLE] echo',
      '[OUTPUT] true',
      '[COMPLETED] echo',
    ]

## supports custom task names

> CLI output

    [
      '[STARTED] pass',
      '[TITLE] pass: running "node -e \'process.exit(0)\'"...',
      '[TITLE] pass',
      '',
      '[COMPLETED] pass',
      '[STARTED] fail',
      '[TITLE] fail: running "node -e \'process.exit(1)\'"...',
      '[TITLE] fail',
    ]
